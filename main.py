import os

# === –ì–õ–û–ë–ê–õ–¨–ù–û–ï –°–û–°–¢–û–Ø–ù–ò–ï –ò–ì–†–´ ===
progress = 0  # 0=–ù–∞—á–∞–ª–æ, 1=–ü—Ä–æ—à–µ–ª –∏–º–ø—É–ª—å—Å, 2=–ü—Ä–æ—à–µ–ª –º–∞–≥–Ω–∏—Ç, 3=–ü—Ä–æ—à–µ–ª –ê—Ä–∞–≥–æ

# === –§–ò–ó–ò–ß–ï–°–ö–ò–ï –ü–ï–†–ï–ú–ï–ù–ù–´–ï (–ì–ª–æ–±–∞–ª—å–Ω—ã–µ) ===
# –û–±—â–∏–µ
B_field = 2.0   # –º–∞–≥–Ω–∏—Ç–Ω–∞—è –∏–Ω–¥—É–∫—Ü–∏—è/—Å–∏–ª–∞ –º–∞–≥–Ω–∏—Ç–∞ (–¢–µ—Å–ª–∞)

# –î–ª—è –û–ø—ã—Ç–∞ 1 (–ò–º–ø—É–ª—å—Å)
current_on = False       # –†—É–±–∏–ª—å–Ω–∏–∫ –ø–µ—Ä–≤–∏—á–Ω–æ–π —Ü–µ–ø–∏
prev_current_on = False  # –°–æ—Å—Ç–æ—è–Ω–∏–µ –≤ –ø—Ä–æ—à–ª–æ–º –∫–∞–¥—Ä–µ
secondary_voltage = 0.0  # –ù–∞–ø—Ä—è–∂–µ–Ω–∏–µ –≤–æ –≤—Ç–æ—Ä–∏—á–Ω–æ–π —Ü–µ–ø–∏

# –î–ª—è –û–ø—ã—Ç–∞ 2 (–ú–∞–≥–Ω–∏—Ç) - –ø–æ–∫–∞ –ø—Ä–æ—Å—Ç–æ –æ–±—ä—è–≤–∏–º, —á—Ç–æ–±—ã –Ω–µ –ª–æ–º–∞–ª–æ—Å—å
speed = 0
voltage = 0.0
# magnet_position = 0

# ==========================================
# –ì–õ–ê–í–ê 1: –ó–ê–ì–ê–î–û–ß–ù–´–ô –ò–ú–ü–£–õ–¨–°
# ==========================================
def chapter_1_pulse():
    global current_on, prev_current_on, secondary_voltage, progress
    
    # –°–±—Ä–æ—Å —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–∏ –≤—Ö–æ–¥–µ –≤ —É—Ä–æ–≤–µ–Ω—å
    current_on = False
    prev_current_on = False
    message = ""
    success_count = 0 # –ù—É–∂–Ω–æ –ø–æ–π–º–∞—Ç—å –∏–º–ø—É–ª—å—Å 3 —Ä–∞–∑–∞, —á—Ç–æ–±—ã –ø—Ä–æ–π—Ç–∏ —É—Ä–æ–≤–µ–Ω—å

    # –í—Å—Ç—É–ø–ª–µ–Ω–∏–µ (–¢–µ–∫—Å—Ç –∏–∑ —Ç–≤–æ–µ–≥–æ —Å—Ü–µ–Ω–∞—Ä–∏—è)
    os.system('clear')
    print("\n--- –ì–õ–ê–í–ê I: –¢–ê–ô–ù–ê, –°–í–Ø–ó–ê–í–®–ê–Ø –≠–õ–ï–ö–¢–†–ò–ß–ï–°–¢–í–û –ò –ú–ê–ì–ù–ï–¢–ò–ó–ú ---\n")
    print("–í –Ω–∞—á–∞–ª–µ XIX –≤–µ–∫–∞ —É—á–µ–Ω—ã–µ –∑–Ω–∞–ª–∏: —Ç–æ–∫ —Å–æ–∑–¥–∞–µ—Ç –º–∞–≥–Ω–µ—Ç–∏–∑–º.")
    print("–§–∞—Ä–∞–¥–µ–π –∑–∞–¥–∞–ª –≤–æ–ø—Ä–æ—Å: –º–æ–∂–µ—Ç –ª–∏ –º–∞–≥–Ω–µ—Ç–∏–∑–º –ø–æ—Ä–æ–¥–∏—Ç—å —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–æ?")
    print("–ü–µ—Ä–µ–¥ –≤–∞–º–∏ –¥–≤–µ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–∞—Ç—É—à–∫–∏ –Ω–∞ –æ–¥–Ω–æ–º —Å–µ—Ä–¥–µ—á–Ω–∏–∫–µ.")
    print("–û–¥–Ω–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∞ –∫ –º–æ—â–Ω–æ–π –±–∞—Ç–∞—Ä–µ–µ, –≤—Ç–æ—Ä–∞—è - –∫ –≥–∞–ª—å–≤–∞–Ω–æ–º–µ—Ç—Ä—É.")
    input("\n–ù–∞–∂–º–∏—Ç–µ Enter, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç...")

    while True:
        os.system('clear')
        print("--- –≠–ö–°–ü–ï–†–ò–ú–ï–ù–¢ ‚Ññ1: –ó–ê–ì–ê–î–û–ß–ù–´–ô –ò–ú–ü–£–õ–¨–° ---")
        print(f"–¶–µ–ª—å: –ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –≤—Å–ø–ª–µ—Å–∫ —Ç–æ–∫–∞ ({success_count}/3 —Ä–∞–∑)\n")
        
        # –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Ü–µ–ø–∏
        switch_state = "[ –ó–ê–ú–ö–ù–£–¢ ]" if current_on else "[ –†–ê–ó–û–ú–ö–ù–£–¢ ]"
        print(f"–ë–∞—Ç–∞—Ä–µ—è (–ü–µ—Ä–≤–∏—á–Ω–∞—è —Ü–µ–ø—å): {switch_state}")
        
        # –õ–æ–≥–∏–∫–∞ —Ñ–∏–∑–∏–∫–∏ (–í–∑–∞–∏–º–æ–∏–Ω–¥—É–∫—Ü–∏—è)
        secondary_voltage = 0
        if current_on != prev_current_on:
            # –í—Å–ø–ª–µ—Å–∫ —Ç–æ–ª—å–∫–æ –≤ –º–æ–º–µ–Ω—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è!
            if current_on:
                secondary_voltage = 10.0  # –í—Å–ø–ª–µ—Å–∫ +
                msg_effect = ">>> –°–¢–†–ï–õ–ö–ê –î–ï–†–ù–£–õ–ê–°–¨ –í–ü–†–ê–í–û! >>>"
            else:
                secondary_voltage = -10.0 # –í—Å–ø–ª–µ—Å–∫ -
                msg_effect = "<<< –°–¢–†–ï–õ–ö–ê –î–ï–†–ù–£–õ–ê–°–¨ –í–õ–ï–í–û! <<<"
            
            # –ï—Å–ª–∏ –∏–≥—Ä–æ–∫ —É–≤–∏–¥–µ–ª —ç—Ç–æ, –∑–∞—Å—á–∏—Ç—ã–≤–∞–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å
            success_count += 1
            message = f"{msg_effect} (–í—ã –∑–∞–º–µ—Ç–∏–ª–∏ –∏–º–ø—É–ª—å—Å!)"
        else:
            # –ï—Å–ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π –Ω–µ—Ç - —Ç–∏—à–∏–Ω–∞
            secondary_voltage = 0
        
        # –í—ã–≤–æ–¥ –ø—Ä–∏–±–æ—Ä–∞
        print(f"–ì–∞–ª—å–≤–∞–Ω–æ–º–µ—Ç—Ä (–í—Ç–æ—Ä–∏—á–Ω–∞—è —Ü–µ–ø—å): {secondary_voltage} –í")
        
        if message:
            print(f"\nüì¢ {message}")
            message = "" # –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
        
        # –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–±–µ–¥—ã
        if success_count >= 3:
            print("\n‚úÖ –û–¢–ö–†–´–¢–ò–ï –°–û–í–ï–†–®–ï–ù–û!")
            print("–í—ã–≤–æ–¥ –§–∞—Ä–∞–¥–µ—è: –ü–æ—Å—Ç–æ—è–Ω–Ω—ã–π —Ç–æ–∫ –Ω–µ —Å–æ–∑–¥–∞–µ—Ç –¥—Ä—É–≥–æ–≥–æ —Ç–æ–∫–∞.")
            print("–¢–æ–∫ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –õ–ò–®–¨ –í –ú–û–ú–ï–ù–¢ –ò–ó–ú–ï–ù–ï–ù–ò–Ø.")
            input("\n–ù–∞–∂–º–∏—Ç–µ Enter, —á—Ç–æ–±—ã –∑–∞–ø–∏—Å–∞—Ç—å –æ—Ç–∫—Ä—ã—Ç–∏–µ –≤ –∂—É—Ä–Ω–∞–ª...")
            if progress < 1: progress = 1
            break

        prev_current_on = current_on

        # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
        print("\n[–ü–£–õ–¨–¢] Space: –í–∫–ª/–í—ã–∫–ª —Ä—É–±–∏–ª—å–Ω–∏–∫ | q: –í—ã—Ö–æ–¥ –≤ –º–µ–Ω—é")
        cmd = input("–î–µ–π—Å—Ç–≤–∏–µ > ")
        
        if cmd == ' ':
            current_on = not current_on
        elif cmd == 'q':
            break


# ==========================================
# –ì–õ–ê–í–ê 2: –î–í–ò–ñ–ï–ù–ò–ï –ù–ê–®–ï –í–°–Å
# ==========================================
def chapter_2_magnet():
    global progress, speed, voltage, B_field

    # –°–±—Ä–æ—Å —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–∏ –≤—Ö–æ–¥–µ –≤ —É—Ä–æ–≤–µ–Ω—å
    speed = 0
    voltage = 0
    detector_mode = 'galvanometer'

    # –í—Å—Ç—É–ø–ª–µ–Ω–∏–µ (–ù–∞—Ä—Ä–∞—Ç–∏–≤)
    os.system('clear')
    print("\n--- –ì–õ–ê–í–ê II: –†–û–ñ–î–ï–ù–ò–ï –≠–õ–ï–ö–¢–†–ò–ß–ï–°–¢–í–ê –ò–ó –ú–ê–ì–ù–ò–¢–ê ---\n")
    print("–ò–º–ø—É–ª—å—Å –±—ã–ª —Å–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–∏–º. –§–∞—Ä–∞–¥–µ–π –∏—â–µ—Ç —Å–ø–æ—Å–æ–± —Å–æ–∑–¥–∞—Ç—å –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–π —Ç–æ–∫.")
    print("–û–Ω –±–µ—Ä–µ—Ç –æ–±—ã—á–Ω—ã–π –º–∞–≥–Ω–∏—Ç –∏ –Ω–∞—á–∏–Ω–∞–µ—Ç –¥–≤–∏–≥–∞—Ç—å –µ–≥–æ –≤–Ω—É—Ç—Ä–∏ –∫–∞—Ç—É—à–∫–∏.")
    print("–ß—Ç–æ–±—ã –æ—â—É—Ç–∏—Ç—å –Ω–æ–≤—É—é —Å–∏–ª—É, –æ–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–µ —Ç–æ–ª—å–∫–æ –ø—Ä–∏–±–æ—Ä, –Ω–æ –∏...")
    print("–ª–∞–ø–∫—É –ª—è–≥—É—à–∫–∏ ‚Äî —Å–∞–º—ã–π —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–π –¥–µ—Ç–µ–∫—Ç–æ—Ä —Ç–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏.")
    input("\n–ù–∞–∂–º–∏—Ç–µ Enter, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç...")

    while True:
        os.system('clear')
        print("--- –≠–ö–°–ü–ï–†–ò–ú–ï–ù–¢ ‚Ññ2: –ò–ù–î–£–ö–¶–ò–Ø –î–í–ò–ñ–ï–ù–ò–Ø ---")
        print("–¶–µ–ª—å: –î–æ–±–∏—Ç—å—Å—è –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ > 5.0 –í)\n")

        # –§–∏–∑–∏–∫–∞
        voltage = speed * B_field
        abs_voltage = abs(voltage)

        # –û—Ç—Ä–∏—Å–æ–≤–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è
        print(f"–°–∏–ª–∞ –º–∞–≥–Ω–∏—Ç–∞: {B_field} –¢–ª")
        print(f"–°–∫–æ—Ä–æ—Å—Ç—å –º–∞–≥–Ω–∏—Ç–∞: {speed}")
        print("-" * 30)

        # –í—ã–≤–æ–¥ –ø—Ä–∏–±–æ—Ä–∞
        print(f"–î–ï–¢–ï–ö–¢–û–†: [{detector_mode.upper()}]")

        if detector_mode == 'galvanometer':
            # –†–µ–∂–∏–º –ø—Ä–∏–±–æ—Ä–∞
            print(f"–ü–æ–∫–∞–∑–∞–Ω–∏—è: {voltage:.1f} –í") # .1f –¥–µ–ª–∞–µ—Ç –∫—Ä–∞—Å–∏–≤–æ (1 –∑–Ω–∞–∫ –ø–æ—Å–ª–µ –∑–∞–ø—è—Ç–æ–π)
        elif detector_mode == 'frog':
            # –†–µ–∂–∏–º –ª—è–≥—É—à–∫–∏
            if abs_voltage < 0.5:
                print("üê∏ –õ—è–≥—É—à–∫–∞: (–°–ø–æ–∫–æ–π–Ω–∞...)")
            elif 0.5 <= abs_voltage <= 5.0:
                print("üê∏ –õ—è–≥—É—à–∫–∞: –î–ï–†–ù–£–õ–ê–°–¨!")
            else:
                print("üê∏ –õ—è–≥—É—à–∫–∞: –í –ö–û–ù–í–£–õ–¨–°–ò–Ø–•! ‚ö°Ô∏è‚ö°Ô∏è‚ö°Ô∏è")

        # –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–±–µ–¥—ã
        if abs_voltage > 5.0:
            print("\n‚úÖ –ü–†–û–†–´–í!")
            print("–§–∞—Ä–∞–¥–µ–π –∑–∞–ø–∏—Å–∞–ª: '–ò–∑–º–µ–Ω—è—é—â–µ–µ—Å—è –º–∞–≥–Ω–∏—Ç–Ω–æ–µ –ø–æ–ª–µ –ø–æ—Ä–æ–∂–¥–∞–µ—Ç —Ç–æ–∫'.")
            print("–ß–µ–º –±—ã—Å—Ç—Ä–µ–µ –¥–≤–∏–∂–µ–Ω–∏–µ ‚Äî —Ç–µ–º —Å–∏–ª—å–Ω–µ–µ —Å–∏–ª–∞.")
            input("\n–ù–∞–∂–º–∏—Ç–µ Enter, —á—Ç–æ–±—ã –∑–∞–ø–∏—Å–∞—Ç—å –∑–∞–∫–æ–Ω –∏–Ω–¥—É–∫—Ü–∏–∏...")
            if progress < 2: progress = 2
            break

        # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
        print("\n[–ü–£–õ–¨–¢] w/s: –°–∫–æ—Ä–æ—Å—Ç—å | d: –°–º–µ–Ω–∏—Ç—å –¥–µ—Ç–µ–∫—Ç–æ—Ä (–ü—Ä–∏–±–æ—Ä/–õ—è–≥—É—à–∫–∞) | q: –í—ã—Ö–æ–¥ –≤ –º–µ–Ω—é")
        cmd = input("–î–µ–π—Å—Ç–≤–∏–µ > ")

        if cmd == 'w':
            speed += 1
        elif cmd == 's':
            speed -= 1
        elif cmd == 'd':
            # –õ–æ–≥–∏–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è (Toggle)
            if detector_mode == 'galvanometer':
                detector_mode = 'frog'
            else:
                detector_mode = 'galvanometer'
        elif cmd == 'q':
            break


# ==========================================
# –ì–õ–ê–í–ù–û–ï –ú–ï–ù–Æ
# ==========================================
def main():
    while True:
        os.system('clear')
        print("=== ASYNC ML ODYSSEY: –ü–£–¢–¨ –§–ê–†–ê–î–ï–Ø ===")
        
        # –§–æ—Ä–º–∏—Ä—É–µ–º —Å–ø–∏—Å–æ–∫ –º–µ–Ω—é —Å –∑–∞–º–∫–∞–º–∏
        p1 = " " if progress >= 0 else "üîí"
        p2 = " " if progress >= 1 else "üîí"
        p3 = " " if progress >= 2 else "üîí"
        p4 = " " if progress >= 3 else "üîí"

        print(f"1. {p1} –ì–ª–∞–≤–∞ I: –¢–∞–π–Ω–∞ –∏ –ò–º–ø—É–ª—å—Å (–í–∑–∞–∏–º–æ–∏–Ω–¥—É–∫—Ü–∏—è)")
        print(f"2. {p2} –ì–ª–∞–≤–∞ II: –ú–∞–≥–Ω–∏—Ç –∏ –õ—è–≥—É—à–∫–∞ (–ò–Ω–¥—É–∫—Ü–∏—è)")
        print(f"3. {p3} –ì–ª–∞–≤–∞ III: –ï–¥–∏–Ω—ã–π –ó–∞–∫–æ–Ω (–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è)")
        print(f"4. {p4} –ì–ª–∞–≤–∞ IV: –î–∏—Å–∫ –ê—Ä–∞–≥–æ (–ú–æ—Ç–æ—Ä)")
        print("q. –í—ã—Ö–æ–¥")

        choice = input("\n–í—ã–±–æ—Ä > ")

        if choice == '1':
            chapter_1_pulse()
        elif choice == '2':
            if progress >= 1:
                chapter_2_magnet()
            else:
                input("\n‚õîÔ∏è –°–Ω–∞—á–∞–ª–∞ –∑–∞–≤–µ—Ä—à–∏—Ç–µ –ø—Ä–µ–¥—ã–¥—É—â—É—é –≥–ª–∞–≤—É! (Enter)")
        elif choice == '3' or choice == '4':
            if progress >= 2:
                input("\nüõ† –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ... (Enter)")
            else:
                input("\n–°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–π–¥–∏—Ç–µ –ø—Ä–µ–¥—ã–¥—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å! (Enter)")
        elif choice == 'q':
            break

if __name__ == "__main__":
    main()